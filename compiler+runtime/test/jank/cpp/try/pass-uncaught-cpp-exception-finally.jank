(cpp/raw "void throw_runtime_error() { throw std::runtime_error(\"runtime error\"); }")

(let [a (atom [])]
  (try
    (try
      (cpp/throw_runtime_error)
      ;; No matching catch for runtime_error (inner catch is for logic_error)
      (catch cpp/std.logic_error e
        (swap! a conj :wrong-catch))
      (finally
        (swap! a conj :finally-ran)))
    (catch cpp/std.runtime_error e
      (swap! a conj :caught-outer)))

  (assert (= [:finally-ran :caught-outer] @a) (pr-str @a)))

:success
