;; Test catching std::invalid_argument
(cpp/raw "namespace jank::cpp::try_::pass_catch_cpp_std_invalid_argument {
  void throw_invalid_argument() { throw std::invalid_argument(\"invalid argument\"); }
}")

(let [caught (atom false)]
  (try
    (cpp/jank.cpp.try_.pass_catch_cpp_std_invalid_argument.throw_invalid_argument)
    (catch cpp/std.runtime_error e)
    (catch cpp/std.invalid_argument e
      (reset! caught (if (= "invalid argument" (cpp/.what e)) true false))))
  (assert @caught "Should have caught std::invalid_argument with correct message"))

:success
