;; Test catching std::bad_cast
(cpp/raw "
#include <typeinfo>
void throw_bad_cast() {
  throw std::bad_cast();
}")

(let [caught (atom false)]
  (try
    (cpp/throw_bad_cast)
    (catch cpp/std.runtime_error e
      (println "Wrong: caught runtime_error"))
    (catch cpp/std.bad_cast e
      (reset! caught true)))
  (assert @caught "Should have caught std::bad_cast"))

:success
