;; Test catching std::bad_cast
(cpp/raw "
#include <typeinfo>
namespace jank::cpp::try_::catch_cpp_bad_cast
{
  void throw_bad_cast()
  {
    throw std::bad_cast();
  }
}")

(let [caught (atom nil)]
  (try
    (cpp/jank.cpp.try_.catch_cpp_bad_cast.throw_bad_cast)
    (catch cpp/std.runtime_error e)
    (catch cpp/std.bad_cast e
      (reset! caught (cpp/.what e))))
  (assert (not (nil? @caught)) "Should have caught std::bad_cast")
  (assert (= "std::bad_cast" @caught) "Error message should be 'std::bad_cast'"))

:success
