(cpp/raw "#include <cstdarg>")
(cpp/raw "namespace jank::cpp::call::global::variadic::pass_variadic
          {
            int sum(int const n, ...)
            {
              va_list args;
              va_start(args, n);

              int ret{};

              for(int i{}; i < n; ++i)
              {
                int const arg{ va_arg(args, int) };
                ret += arg;
              }

              va_end(args);
              return ret;
            }
          }")
(let* [n (cpp/int. 5)
       i (cpp/int. 2)
       a (cpp/jank.cpp.call.global.variadic.pass_variadic.sum (cpp/int.))
       b (cpp/jank.cpp.call.global.variadic.pass_variadic.sum (cpp/int 1) i)
       c (cpp/jank.cpp.call.global.variadic.pass_variadic.sum n i i i i i)]
  (if (and (= 0 a) (= 2 b) (= 10 c))
    :success))
